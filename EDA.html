<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head></head><body>






















    
    
    
    
<div style="display: none;"></div>
  <div class="border-box-sizing">
    <div class="container">

<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p></p><center><h2>CO2 Emission Prediction</h2></center>
Capstone Project<p></p>
<p></p><figure>
<p></p>
<p><em>About the problem</em></p>
<blockquote><p>The ability to accurately monitor carbon emissions is a critical step in the fight against climate change. Precise carbon readings allow researchers and governments to understand the sources and patterns of carbon mass output. While Europe and North America have extensive systems in place to monitor carbon emissions on the ground, there are few available in Africa.</p>
</blockquote>
<p><em>Objective of this challenge</em></p>
<blockquote><p>The objective of this challenge is to create machine learning or a deep learning model using open-source CO2 emissions data (from Sentinel-5P satellite observations) to predict carbon emissions.</p>
</blockquote>
<p>These solutions will enable governments and other actors to estimate carbon emission levels across Africa, even in places where on-the-ground monitoring is not possible.</p>

</figure></div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Table of contents:<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Table-of-contents:">&#182;</a></h2><ol>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Libraries">Installing and importing libraries</a></li>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Data">Loading data</a></li>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Statistics">Statistical summaries</a></li>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Outliers">Outliers</a></li>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Geo">Geo Visualisation - EDA</a></li>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Missing">Missing values and duplicates</a></li>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Dates">Date features EDA</a></li>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Correlations">Correlations - EDA</a></li>
<li><a rel="noopener" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#Timeseries">Timeseries visualization - EDA</a></li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Libraries"></a></p>
<h2>1. Installing and importing libraries<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#1.-Installing-and-importing-libraries">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="n">capture</span>
<span class="c1"># Install relevant libraries</span>
<span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">geopandas</span> <span class="n">folium</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Import libraries</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">tqdm.notebook</span> <span class="k">import</span> <span class="n">tqdm</span>

<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="k">import</span> <span class="n">Point</span>
<span class="kn">import</span> <span class="nn">folium</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="k">import</span> <span class="n">RandomForestRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">mean_squared_error</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_rows</span> <span class="o">=</span> <span class="kc">None</span>

<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># You can ignore the Shapely GEOS warning :-)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stderr output_text">
<pre>/opt/conda/lib/python3.7/site-packages/geopandas/_compat.py:115: UserWarning: The Shapely GEOS version (3.9.1-CAPI-1.14.2) is incompatible with the GEOS version PyGEOS was compiled with (3.10.4-CAPI-1.16.2). Conversions between both will be slow.
  shapely_geos_version, geos_capi_version_string
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Set seed for reproducability</span>
<span class="n">SEED</span> <span class="o">=</span> <span class="mi">2023</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">SEED</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">SEED</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Data"></a></p>
<h2>2. Loading and previewing data<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#2.-Loading-and-previewing-data">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">DATA_PATH</span> <span class="o">=</span> <span class="s1">&#39;/kaggle/input/playground-series-s3e20&#39;</span>
<span class="c1"># Load files</span>
<span class="n">train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_PATH</span><span class="p">,</span> <span class="s1">&#39;train.csv&#39;</span><span class="p">))</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_PATH</span><span class="p">,</span> <span class="s1">&#39;test.csv&#39;</span><span class="p">))</span>
<span class="n">samplesubmission</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_PATH</span><span class="p">,</span> <span class="s1">&#39;sample_submission.csv&#39;</span><span class="p">))</span>

<span class="c1"># Preview train dataset</span>
<span class="n">train</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID_LAT_LON_YEAR_WEEK</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>year</th>
      <th>week_no</th>
      <th>SulphurDioxide_SO2_column_number_density</th>
      <th>SulphurDioxide_SO2_column_number_density_amf</th>
      <th>SulphurDioxide_SO2_slant_column_number_density</th>
      <th>SulphurDioxide_cloud_fraction</th>
      <th>SulphurDioxide_sensor_azimuth_angle</th>
      <th>...</th>
      <th>Cloud_cloud_top_height</th>
      <th>Cloud_cloud_base_pressure</th>
      <th>Cloud_cloud_base_height</th>
      <th>Cloud_cloud_optical_depth</th>
      <th>Cloud_surface_albedo</th>
      <th>Cloud_sensor_azimuth_angle</th>
      <th>Cloud_sensor_zenith_angle</th>
      <th>Cloud_solar_azimuth_angle</th>
      <th>Cloud_solar_zenith_angle</th>
      <th>emission</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ID_-0.510_29.290_2019_00</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2019</td>
      <td>0</td>
      <td>-0.00011</td>
      <td>0.60302</td>
      <td>-0.00007</td>
      <td>0.25567</td>
      <td>-98.59389</td>
      <td>...</td>
      <td>3664.43622</td>
      <td>61085.80957</td>
      <td>2615.12048</td>
      <td>15.56853</td>
      <td>0.27229</td>
      <td>-12.62899</td>
      <td>35.63242</td>
      <td>-138.78642</td>
      <td>30.75214</td>
      <td>3.75099</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ID_-0.510_29.290_2019_01</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2019</td>
      <td>1</td>
      <td>0.00002</td>
      <td>0.72821</td>
      <td>0.00001</td>
      <td>0.13099</td>
      <td>16.59286</td>
      <td>...</td>
      <td>3651.19031</td>
      <td>66969.47873</td>
      <td>3174.57242</td>
      <td>8.69060</td>
      <td>0.25683</td>
      <td>30.35938</td>
      <td>39.55763</td>
      <td>-145.18393</td>
      <td>27.25178</td>
      <td>4.02518</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ID_-0.510_29.290_2019_02</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2019</td>
      <td>2</td>
      <td>0.00051</td>
      <td>0.74820</td>
      <td>0.00038</td>
      <td>0.11002</td>
      <td>72.79584</td>
      <td>...</td>
      <td>4216.98649</td>
      <td>60068.89445</td>
      <td>3516.28267</td>
      <td>21.10341</td>
      <td>0.25110</td>
      <td>15.37788</td>
      <td>30.40182</td>
      <td>-142.51954</td>
      <td>26.19330</td>
      <td>4.23138</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ID_-0.510_29.290_2019_03</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2019</td>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>5228.50774</td>
      <td>51064.54734</td>
      <td>4180.97332</td>
      <td>15.38690</td>
      <td>0.26204</td>
      <td>-11.29340</td>
      <td>24.38036</td>
      <td>-132.66583</td>
      <td>28.82915</td>
      <td>4.30529</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ID_-0.510_29.290_2019_04</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2019</td>
      <td>4</td>
      <td>-0.00008</td>
      <td>0.67630</td>
      <td>-0.00005</td>
      <td>0.12116</td>
      <td>4.12127</td>
      <td>...</td>
      <td>3980.59812</td>
      <td>63751.12578</td>
      <td>3355.71011</td>
      <td>8.11469</td>
      <td>0.23585</td>
      <td>38.53226</td>
      <td>37.39298</td>
      <td>-141.50981</td>
      <td>22.20461</td>
      <td>4.34732</td>
    </tr>
  </tbody>
</table>
<p>5 rows &#215; 76 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Preview test dataset</span>
<span class="n">test</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID_LAT_LON_YEAR_WEEK</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>year</th>
      <th>week_no</th>
      <th>SulphurDioxide_SO2_column_number_density</th>
      <th>SulphurDioxide_SO2_column_number_density_amf</th>
      <th>SulphurDioxide_SO2_slant_column_number_density</th>
      <th>SulphurDioxide_cloud_fraction</th>
      <th>SulphurDioxide_sensor_azimuth_angle</th>
      <th>...</th>
      <th>Cloud_cloud_top_pressure</th>
      <th>Cloud_cloud_top_height</th>
      <th>Cloud_cloud_base_pressure</th>
      <th>Cloud_cloud_base_height</th>
      <th>Cloud_cloud_optical_depth</th>
      <th>Cloud_surface_albedo</th>
      <th>Cloud_sensor_azimuth_angle</th>
      <th>Cloud_sensor_zenith_angle</th>
      <th>Cloud_solar_azimuth_angle</th>
      <th>Cloud_solar_zenith_angle</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ID_-0.510_29.290_2022_00</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2022</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>36022.02734</td>
      <td>8472.31348</td>
      <td>41047.93750</td>
      <td>7472.31348</td>
      <td>7.93562</td>
      <td>0.24077</td>
      <td>-100.11379</td>
      <td>33.69704</td>
      <td>-133.04755</td>
      <td>33.77958</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ID_-0.510_29.290_2022_01</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2022</td>
      <td>1</td>
      <td>0.00046</td>
      <td>0.69116</td>
      <td>0.00032</td>
      <td>0.00000</td>
      <td>76.23920</td>
      <td>...</td>
      <td>48539.73724</td>
      <td>6476.14732</td>
      <td>54915.70858</td>
      <td>5476.14716</td>
      <td>11.44844</td>
      <td>0.29312</td>
      <td>-30.51032</td>
      <td>42.40259</td>
      <td>-138.63282</td>
      <td>31.01238</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ID_-0.510_29.290_2022_02</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2022</td>
      <td>2</td>
      <td>0.00016</td>
      <td>0.60511</td>
      <td>0.00011</td>
      <td>0.07987</td>
      <td>-42.05534</td>
      <td>...</td>
      <td>34133.08047</td>
      <td>8984.79570</td>
      <td>39006.09375</td>
      <td>7984.79570</td>
      <td>10.75318</td>
      <td>0.26713</td>
      <td>39.08736</td>
      <td>45.93648</td>
      <td>-144.78499</td>
      <td>26.74336</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ID_-0.510_29.290_2022_03</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2022</td>
      <td>3</td>
      <td>0.00035</td>
      <td>0.69692</td>
      <td>0.00024</td>
      <td>0.20103</td>
      <td>72.16957</td>
      <td>...</td>
      <td>50854.99108</td>
      <td>6014.72406</td>
      <td>57646.36837</td>
      <td>5014.72412</td>
      <td>11.76456</td>
      <td>0.30468</td>
      <td>-24.46513</td>
      <td>42.14042</td>
      <td>-135.02789</td>
      <td>29.60477</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ID_-0.510_29.290_2022_04</td>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>2022</td>
      <td>4</td>
      <td>-0.00032</td>
      <td>0.58053</td>
      <td>-0.00018</td>
      <td>0.20435</td>
      <td>76.19086</td>
      <td>...</td>
      <td>46594.68514</td>
      <td>6849.28048</td>
      <td>52896.54187</td>
      <td>5849.28039</td>
      <td>13.06532</td>
      <td>0.28422</td>
      <td>-12.90785</td>
      <td>30.12264</td>
      <td>-135.50012</td>
      <td>26.27681</td>
    </tr>
  </tbody>
</table>
<p>5 rows &#215; 75 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Preview sample submission file</span>
<span class="n">samplesubmission</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID_LAT_LON_YEAR_WEEK</th>
      <th>emission</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ID_-0.510_29.290_2022_00</td>
      <td>81.94000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ID_-0.510_29.290_2022_01</td>
      <td>81.94000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ID_-0.510_29.290_2022_02</td>
      <td>81.94000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ID_-0.510_29.290_2022_03</td>
      <td>81.94000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ID_-0.510_29.290_2022_04</td>
      <td>81.94000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Check size and shape of datasets</span>
<span class="n">train</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">test</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">samplesubmission</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>((79023, 76), (24353, 75), (24353, 2))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Train to test sets ratio</span>
<span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">train</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">test</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.23557692307692307</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Statistics"></a></p>
<h2>3. Statistical summaries<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#3.-Statistical-summaries">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Train statistical summary</span>
<span class="n">train</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID_LAT_LON_YEAR_WEEK</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>year</th>
      <th>week_no</th>
      <th>SulphurDioxide_SO2_column_number_density</th>
      <th>SulphurDioxide_SO2_column_number_density_amf</th>
      <th>SulphurDioxide_SO2_slant_column_number_density</th>
      <th>SulphurDioxide_cloud_fraction</th>
      <th>SulphurDioxide_sensor_azimuth_angle</th>
      <th>...</th>
      <th>Cloud_cloud_top_height</th>
      <th>Cloud_cloud_base_pressure</th>
      <th>Cloud_cloud_base_height</th>
      <th>Cloud_cloud_optical_depth</th>
      <th>Cloud_surface_albedo</th>
      <th>Cloud_sensor_azimuth_angle</th>
      <th>Cloud_sensor_zenith_angle</th>
      <th>Cloud_solar_azimuth_angle</th>
      <th>Cloud_solar_zenith_angle</th>
      <th>emission</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>79023</td>
      <td>79023.00000</td>
      <td>79023.00000</td>
      <td>79023.00000</td>
      <td>79023.00000</td>
      <td>64414.00000</td>
      <td>64414.00000</td>
      <td>64414.00000</td>
      <td>64414.00000</td>
      <td>64414.00000</td>
      <td>...</td>
      <td>78539.00000</td>
      <td>78539.00000</td>
      <td>78539.00000</td>
      <td>78539.00000</td>
      <td>78539.00000</td>
      <td>78539.00000</td>
      <td>78539.00000</td>
      <td>78539.00000</td>
      <td>78539.00000</td>
      <td>79023.00000</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>79023</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>top</th>
      <td>ID_-0.510_29.290_2019_00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>NaN</td>
      <td>-1.89107</td>
      <td>29.88015</td>
      <td>2020.00000</td>
      <td>26.00000</td>
      <td>0.00005</td>
      <td>0.83485</td>
      <td>0.00004</td>
      <td>0.15842</td>
      <td>-7.92587</td>
      <td>...</td>
      <td>5592.37748</td>
      <td>59420.29746</td>
      <td>4670.43087</td>
      <td>19.13924</td>
      <td>0.27146</td>
      <td>-10.78483</td>
      <td>40.43698</td>
      <td>-86.80058</td>
      <td>27.92598</td>
      <td>81.94055</td>
    </tr>
    <tr>
      <th>std</th>
      <td>NaN</td>
      <td>0.69452</td>
      <td>0.81038</td>
      <td>0.81650</td>
      <td>15.29716</td>
      <td>0.00027</td>
      <td>0.18538</td>
      <td>0.00021</td>
      <td>0.07136</td>
      <td>64.26337</td>
      <td>...</td>
      <td>1428.50300</td>
      <td>9051.16361</td>
      <td>1359.25158</td>
      <td>13.54705</td>
      <td>0.04943</td>
      <td>30.37446</td>
      <td>6.42822</td>
      <td>37.83727</td>
      <td>4.40384</td>
      <td>144.29965</td>
    </tr>
    <tr>
      <th>min</th>
      <td>NaN</td>
      <td>-3.29900</td>
      <td>28.22800</td>
      <td>2019.00000</td>
      <td>0.00000</td>
      <td>-0.00100</td>
      <td>0.24182</td>
      <td>-0.00089</td>
      <td>0.00000</td>
      <td>-179.53706</td>
      <td>...</td>
      <td>1050.66178</td>
      <td>24779.03370</td>
      <td>1050.49682</td>
      <td>1.84453</td>
      <td>0.01770</td>
      <td>-102.73973</td>
      <td>2.99887</td>
      <td>-153.46421</td>
      <td>10.81829</td>
      <td>0.00000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>NaN</td>
      <td>-2.45100</td>
      <td>29.26200</td>
      <td>2019.00000</td>
      <td>13.00000</td>
      <td>-0.00010</td>
      <td>0.70582</td>
      <td>-0.00008</td>
      <td>0.11053</td>
      <td>-56.78238</td>
      <td>...</td>
      <td>4595.40052</td>
      <td>53175.77993</td>
      <td>3680.85634</td>
      <td>9.97457</td>
      <td>0.24145</td>
      <td>-30.30917</td>
      <td>35.82991</td>
      <td>-125.99116</td>
      <td>24.68676</td>
      <td>9.79800</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>NaN</td>
      <td>-1.88200</td>
      <td>29.88300</td>
      <td>2020.00000</td>
      <td>26.00000</td>
      <td>0.00002</td>
      <td>0.80912</td>
      <td>0.00002</td>
      <td>0.16185</td>
      <td>-12.44173</td>
      <td>...</td>
      <td>5573.85431</td>
      <td>59332.53255</td>
      <td>4621.75517</td>
      <td>15.13069</td>
      <td>0.27275</td>
      <td>-12.67391</td>
      <td>41.11963</td>
      <td>-84.64435</td>
      <td>28.33363</td>
      <td>45.59345</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>NaN</td>
      <td>-1.30300</td>
      <td>30.47100</td>
      <td>2021.00000</td>
      <td>39.00000</td>
      <td>0.00015</td>
      <td>0.94279</td>
      <td>0.00012</td>
      <td>0.21182</td>
      <td>72.05999</td>
      <td>...</td>
      <td>6542.30364</td>
      <td>65663.84268</td>
      <td>5572.98322</td>
      <td>23.78503</td>
      <td>0.30289</td>
      <td>9.40220</td>
      <td>44.44627</td>
      <td>-48.13270</td>
      <td>31.49988</td>
      <td>109.54959</td>
    </tr>
    <tr>
      <th>max</th>
      <td>NaN</td>
      <td>-0.51000</td>
      <td>31.53200</td>
      <td>2021.00000</td>
      <td>52.00000</td>
      <td>0.00419</td>
      <td>1.88524</td>
      <td>0.00424</td>
      <td>0.30000</td>
      <td>122.09520</td>
      <td>...</td>
      <td>12384.23946</td>
      <td>89291.61558</td>
      <td>11384.23946</td>
      <td>250.00000</td>
      <td>0.73651</td>
      <td>78.22304</td>
      <td>65.95125</td>
      <td>-22.65317</td>
      <td>42.06044</td>
      <td>3167.76800</td>
    </tr>
  </tbody>
</table>
<p>11 rows &#215; 76 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>From the above statistical summary, we can deduce some of the following insights:</p>
<ul>
<li>The train data provided ranges from year <em>2019 to 2021</em></li>
<li>Minimum recorded CO2 emissions is <em>0.32064</em> and a maximum of <em>3167.76800</em></li>
<li>Week of the year starts from 0 to 52</li>
<li>The latitude and longitudes ranges show that the regions are mostly within Rwanda </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Target variable distribution</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">train</span><span class="o">.</span><span class="n">emission</span><span class="p">,</span> <span class="n">kde</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Target variable distribution&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">1.02</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">(),</span> <span class="n">train</span><span class="o">.</span><span class="n">emission</span><span class="o">.</span><span class="n">skew</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea">
<img src="javascript://"/>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea">
<pre>None</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea">
<pre>10.173825825101622</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The target variable is skewed to the right with a a degree of ~7.</p>
<p>Some of the techniques used to handle skewness include:</p>
<ul>
<li>Log transform</li>
<li>Box-cox transform</li>
<li>Square root transform</li>
<li><em>etc</em></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Outliers"></a></p>
<h2>4. Outliers<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#4.-Outliers">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Plotting boxplot for the CO2 emissions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">train</span><span class="o">.</span><span class="n">emission</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Boxplot showing CO2 emission outliers&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">1.02</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea">
<img src="javascript://"/>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Geo"></a></p>
<h2>5. Geo Visualisation - EDA<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#5.-Geo-Visualisation---EDA">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Combine train and test for easy visualisation</span>
<span class="n">train_coords</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">])</span>
<span class="n">test_coords</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">])</span>
<span class="n">train_coords</span><span class="p">[</span><span class="s1">&#39;set_type&#39;</span><span class="p">],</span> <span class="n">test_coords</span><span class="p">[</span><span class="s1">&#39;set_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;train&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span>

<span class="n">all_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">train_coords</span><span class="p">,</span> <span class="n">test_coords</span><span class="p">],</span> <span class="n">ignore_index</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="c1"># Create point geometries</span>

<span class="n">geometry</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">all_data</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span> <span class="n">all_data</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span>
<span class="n">geo_df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
    <span class="n">all_data</span><span class="p">[[</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="s2">&quot;set_type&quot;</span><span class="p">]],</span> <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span>
<span class="p">)</span>

<span class="c1"># Preview the geopandas df</span>
<span class="n">geo_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>latitude</th>
      <th>longitude</th>
      <th>set_type</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.51000</td>
      <td>29.29000</td>
      <td>train</td>
      <td>POINT (29.29000 -0.51000)</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.52800</td>
      <td>29.47200</td>
      <td>train</td>
      <td>POINT (29.47200 -0.52800)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.54700</td>
      <td>29.65300</td>
      <td>train</td>
      <td>POINT (29.65300 -0.54700)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.56900</td>
      <td>30.03100</td>
      <td>train</td>
      <td>POINT (30.03100 -0.56900)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.59800</td>
      <td>29.10200</td>
      <td>train</td>
      <td>POINT (29.10200 -0.59800)</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Create a canvas to plot your map on</span>
<span class="n">all_data_map</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">prefer_canvas</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Create a geometry list from the GeoDataFrame</span>
<span class="n">geo_df_list</span> <span class="o">=</span> <span class="p">[[</span><span class="n">point</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="o">.</span><span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">geo_df</span><span class="o">.</span><span class="n">geometry</span><span class="p">]</span>

<span class="c1"># Iterate through list and add a marker for each volcano, color-coded by its type.</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">coordinates</span> <span class="ow">in</span> <span class="n">geo_df_list</span><span class="p">:</span>
    <span class="c1"># assign a color marker for the type set</span>
    <span class="k">if</span> <span class="n">geo_df</span><span class="o">.</span><span class="n">set_type</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;train&quot;</span><span class="p">:</span>
        <span class="n">type_color</span> <span class="o">=</span> <span class="s2">&quot;green&quot;</span>
    <span class="k">elif</span> <span class="n">geo_df</span><span class="o">.</span><span class="n">set_type</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;test&quot;</span><span class="p">:</span>
        <span class="n">type_color</span> <span class="o">=</span> <span class="s2">&quot;orange&quot;</span>

    <span class="c1"># Place the markers </span>
    <span class="n">all_data_map</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="n">folium</span><span class="o">.</span><span class="n">CircleMarker</span><span class="p">(</span>
            <span class="n">location</span><span class="o">=</span><span class="n">coordinates</span><span class="p">,</span>
            <span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">weight</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
            <span class="n">zoom</span> <span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">popup</span><span class="o">=</span> 
            <span class="s2">&quot;Set: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">geo_df</span><span class="o">.</span><span class="n">set_type</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
            <span class="s2">&quot;Coordinates: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">([</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">geo_df_list</span><span class="p">[</span><span class="n">i</span><span class="p">]]),</span>
            <span class="n">color</span> <span class="o">=</span>  <span class="n">type_color</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">all_data_map</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">all_data_map</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">())</span>
<span class="n">all_data_map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656;">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe class="d2l-xspl-box" src="https://durhamcollege.desire2learn.com/d2l/lp/externalUrls/xspl?url=.%2fEDA_files%2fsaved_resource.html" data-original-html="&lt;iframe style=&quot;position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;&quot; allowfullscreen=&quot;&quot; src=&quot;./EDA_files/saved_resource.html&quot;&gt;&lt;/iframe&gt;" frameborder="0" scrolling="no" allowfullscreen></iframe>
</div></div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Missing"></a></p>
<h2>6. Missing values and duplicates<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#6.-Missing-values-and-duplicates">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Check for missing values</span>
<span class="n">train</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(),</span> <span class="n">test</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(True, True)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Plot missing values in train set</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)[:</span><span class="mi">15</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Percentage of Missing Values Per Column in Train Set&#39;</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;size&#39;</span><span class="p">:</span><span class="mi">15</span><span class="p">})</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
    <span class="n">percentage</span> <span class="o">=</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="n">p</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span><span class="o">/</span><span class="n">train</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">get_width</span><span class="p">(),</span><span class="n">p</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
    <span class="n">x</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span><span class="o">+</span><span class="n">width</span><span class="o">+</span><span class="mf">0.02</span>
    <span class="n">y</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span><span class="o">+</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">percentage</span><span class="p">,(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea">
<img src="javascript://"/>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Suggestions on how to handle missing values:</p>
<ul>
<li>Fill in missing values with mode, mean, median..</li>
<li>Drop Missing datapoints with missing values</li>
<li>Fill in with a large number e.g -999999</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Check for duplicates</span>
<span class="n">train</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(),</span> <span class="n">test</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(False, False)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Dates"></a></p>
<h2>7. Date features EDA<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#7.-Date-features-EDA">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Year countplot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">train</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Year count plot - Train&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea">
<img src="javascript://"/>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Year countplot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">test</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Year count plot - Test&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea">
<img src="javascript://"/>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>The number of observations of CO2 emissions are the same across the years (2019, 2020, 2021)</li>
<li>Year 2022 (in the test set) has fewer number of observations</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Week countplot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;week_no&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">train</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Week count plot - Train&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea">
<img src="javascript://"/>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>The number of observations of CO2 emissions are relatively the same across the weeks</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">train</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;week_no&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">])[[</span><span class="s1">&#39;week_no&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>

<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>week_no</th>
    </tr>
    <tr>
      <th>year</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019</th>
      <td>53</td>
    </tr>
    <tr>
      <th>2020</th>
      <td>53</td>
    </tr>
    <tr>
      <th>2021</th>
      <td>53</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Correlations"></a></p>
<h2>8. Correlations - EDA<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#8.-Correlations---EDA">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Top 20 correlated features to the target</span>
<span class="n">top20_corrs</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">train</span><span class="o">.</span><span class="n">corr</span><span class="p">()[</span><span class="s1">&#39;emission&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">top20_corrs</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[21]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>emission                                                   1.00000
longitude                                                  0.10275
UvAerosolLayerHeight_aerosol_height                        0.06901
UvAerosolLayerHeight_aerosol_pressure                      0.06814
Cloud_surface_albedo                                       0.04659
CarbonMonoxide_H2O_column_number_density                   0.04322
CarbonMonoxide_CO_column_number_density                    0.04133
Formaldehyde_tropospheric_HCHO_column_number_density_amf   0.04026
UvAerosolLayerHeight_aerosol_optical_depth                 0.04016
UvAerosolLayerHeight_sensor_azimuth_angle                  0.03514
NitrogenDioxide_solar_azimuth_angle                        0.03342
Formaldehyde_tropospheric_HCHO_column_number_density       0.03333
SulphurDioxide_solar_azimuth_angle                         0.03234
Formaldehyde_solar_azimuth_angle                           0.03081
NitrogenDioxide_sensor_altitude                            0.02754
UvAerosolLayerHeight_solar_azimuth_angle                   0.02721
NitrogenDioxide_sensor_azimuth_angle                       0.02710
CarbonMonoxide_solar_azimuth_angle                         0.02628
SulphurDioxide_sensor_azimuth_angle                        0.02508
Ozone_solar_azimuth_angle                                  0.02485
Name: emission, dtype: float64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Quantify correlations between features</span>
<span class="n">corr</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">top20_corrs</span><span class="o">.</span><span class="n">index</span><span class="p">)]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;RdYlGn&#39;</span><span class="p">,</span> <span class="n">annot</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">center</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Correlogram&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;darkgreen&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea">
<img src="javascript://"/>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a rel="noopener" name="Timeseries"></a></p>
<h2>9. Timeseries visualization - EDA<a rel="noopener" class="anchor-link" href="https://htmtopdf.herokuapp.com/ipynbviewer/temp/e2d36097cce9caffe9c0a0736706e911/EDA.html?t=1701490412920#9.-Timeseries-visualization---EDA">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&#160;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Sample a unique location and visualize its emissions across the years</span>
<span class="n">train</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">train</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">train</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">train</span><span class="o">.</span><span class="n">longitude</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">sample_loc</span> <span class="o">=</span> <span class="n">train</span><span class="p">[(</span><span class="n">train</span><span class="o">.</span><span class="n">latitude</span> <span class="o">==</span> <span class="o">-</span><span class="mf">0.510</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">train</span><span class="o">.</span><span class="n">longitude</span> <span class="o">==</span> <span class="mf">29.290</span><span class="p">)]</span>

<span class="c1"># Plot a line plot</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Co2 emissions for location lat -23.75 lon 28.75&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.02</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>

<span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">sample_loc</span><span class="p">,</span> <span class="n">sample_loc</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="p">[</span><span class="s1">&#39;#882255&#39;</span><span class="p">,</span><span class="s1">&#39;#332288&#39;</span><span class="p">,</span> <span class="s1">&#39;#999933&#39;</span> <span class="p">,</span> <span class="s1">&#39;orangered&#39;</span><span class="p">]):</span>
  <span class="n">df</span> <span class="o">=</span> <span class="n">sample_loc</span><span class="p">[</span><span class="n">sample_loc</span><span class="o">.</span><span class="n">year</span> <span class="o">==</span> <span class="n">year</span><span class="p">]</span>
  <span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">week_no</span><span class="p">,</span><span class="n">y</span><span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">emission</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">year</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea">
<img src="javascript://"/>
</div>

</div>

</div>
</div>

</div>
    </div>
  </div>


 



<div class="grammarly-desktop-integration"></div><script type="module" src="https://s.brightspace.com/lib/bsi/2024.10.209/unbundled/mathjax.js"></script><script type="text/javascript">document.addEventListener('DOMContentLoaded', function() {
						if (document.querySelector('math') || /\$\$|\\\(|\\\[|\\begin{|\\ref{|\\eqref{/.test(document.body.innerHTML)) {
							document.querySelectorAll('mspace[linebreak="newline"]').forEach(elm => {
								elm.setAttribute('style', 'display: block; height: 0.5rem;');
							});

							window.D2L.MathJax.loadMathJax({
								outputScale: 1.5,
								renderLatex: false,
								enableMML3Support: false
							});
						}
					});</script><script type="module" src="https://s.brightspace.com/lib/bsi/2024.10.209/unbundled/prism.js"></script><script type="text/javascript">document.addEventListener('DOMContentLoaded', function() {
					document.querySelectorAll('.d2l-code').forEach(code => {
						window.D2L.Prism.formatCodeElement(code);
					});
				});</script><script type="module" src="https://s.brightspace.com/lib/bsi/2024.10.209/unbundled/embeds.js"></script><script type="text/javascript">document.addEventListener('DOMContentLoaded', function() {
					window.D2L.EmbedRenderer.renderEmbeds(document.body);
				});</script></body></html>